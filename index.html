<!DOCTYPE html>
<html lang="en" ng-app="browser-redirect-test">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<body ng-controller="RunTestController as ctrl">

<button ng-hide="ctrl.started" ng-click="ctrl.run()">run the tests!</button>
<button ng-click="ctrl.view()">view all test results!</button>

<select ng-show="ctrl.keys.length" ng-model="ctrl.selectedKey">
  <option ng-repeat="key in ctrl.keys" value="{{key}}">{{key}}</option>
</select>

<div ng-show="ctrl.started || ctrl.keys.length">
  <p>
    user-agent: {{ctrl.result.agent}}
  </p>

  <div result-table="ctrl.tableData()" methods="ctrl.methods" codes="ctrl.codes" hover="ctrl.hover(method, code)"></div>
</div>

<div ng-repeat="agentData in ctrl.hoverData('firstRun')">
  <img ng-src="/browser-icon?agent={{agentData.agentString | uricomponent}}">
  <span ng-repeat="request in agentData.serverLog">
    <span ng-if="$index === 0">Initial</span>
    <b ng-if="$index !== 0">-&gt;</b>
    {{request.method | uppercase}}
    <span ng-if="$index !== 0">at {{request.path.replace('/','')}} location</span>
  </span>
  <b>-></b> Done ...
  <b> Browser Sees </b>
  ({{agentData.browserResult.code}}):
  {{agentData.browserResult.body}} Body
</div>

<script src="bundle.js"></script>

</body>
</html>